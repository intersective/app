<ion-header color="light">
  <ion-toolbar class="project-toolbar">
    <ion-title center>{{programName}}</ion-title>
  </ion-toolbar>
</ion-header>


<ion-grid class="milestone-bar">
  <ion-row >
    <ion-col class="bubbles-top" *ngFor="let level of milestons">
      <div *ngIf="!level.is_locked; else levelLocked">
        <ion-icon *ngIf="level.progress >= 1; else circleProgress" name="checkmark-circle" class="icon-done" color="primary" ></ion-icon>
        <ng-template #circleProgress>
          <circle-progress 
            [percent]="level.progress * 100"
          >
          </circle-progress >
        </ng-template>  
      </div>
      <ng-template #levelLocked>
       <ion-icon  name="lock" color="medium" class="icon-lock"></ion-icon>
      </ng-template>
    </ion-col>
  </ion-row>
</ion-grid>

<ion-content color="light">
  <ion-list class="project-list" >
    <ion-item *ngFor="let level of milestons" >
      <div color="light" class="project-card">
        <div class="milestone" padding >
          <ion-text color="medium">MILESTONE</ion-text>
          <p class="project-title">{{level.name}}</p>
          <div class="milestone-description" [innerHtml]="level.description"></div>
          <div *ngIf="level.Activity" class="milestone-activities">
            <ion-list class="activity-list">
              <ion-item class="activity-item" *ngFor="let activity of level.Activity">
                  <div *ngIf="!activity.is_locked; else activityLocked" class="row-cards">
                    <ion-icon *ngIf="activity.progress >= 1; else circleProgressActivity" name="checkmark-circle" class="icon-done" margin-end color="primary"></ion-icon>
                    <ng-template #circleProgressActivity>
                      <circle-progress margin-end 
                        [percent]="activity.progress * 100"
                      ></circle-progress>
                    </ng-template>  
                  </div>
                  <ng-template #activityLocked>
                    <ion-icon  name="lock" color="medium" class="icon-lock"></ion-icon>
                  </ng-template>
                  
                  <!-- <ion-card 
                    color="primary"
                    class="card practera-card"
                    [ngClass]="{
                       'locked-card' : activity.is_locked,
                       'image-card'  : activity.lead_image
                    }"
                    (click)="!activity.is_locked && goto(activity.id)"
                    >         
                    <ion-card-content [ngClass]="{'feedback-card': activity.hasFeedback }">
                      <h4 color="primary-contrast">Activity</h4>
                      <h2 color="primary-contrast" class="activity-name">{{activity.name}}</h2>
                      <div class="feedback-label" *ngIf="activity.hasFeedback">
                        <p>Feedback Available</p>
                      </div>
                    </ion-card-content>
                  </ion-card> -->
                  <app-activity-card [activity]="activity" (click)="!activity.is_locked && goToActivity(activity.id)"></app-activity-card>
              </ion-item>
            </ion-list>
          </div>
        </div>
      </div>
    </ion-item>
  </ion-list>
</ion-content>
