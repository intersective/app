<ion-header>
  <ion-toolbar color="light">
    <ion-icon name="arrow-back" (click)="back()" color="primary" slot="start" margin-start></ion-icon>
    <ion-title text-center>Activity</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding color="light" text-center>
  <ng-container *ngIf="loadingActivity">
    <ion-spinner></ion-spinner>
  </ng-container>
  <h1>{{ activity.name }}</h1>
  <div text-left>
    <app-description [content]="activity.description"></app-description>
  </div>
  <ion-label color="medium" text-left padding-top class="label">
    Tasks
  </ion-label>

  <ion-card class="practera-card">
    <ion-list *ngFor="let task of activity.tasks">
      <ion-item (click)="goto(task.type, task.id)">
        <ng-container [ngSwitch]="task.type">

          <ng-container *ngSwitchCase="'Locked'">
            <ion-icon name="lock" slot="start" color="primary"></ion-icon>
          </ng-container>
          <ng-container *ngSwitchCase="'Topic'">
            <ion-icon name="list-box" slot="start" color="primary"></ion-icon>
          </ng-container>
          <ng-container *ngSwitchCase="'Assessment'">
            <ion-icon name="clipboard" slot="start" color="primary"></ion-icon>
          </ng-container>

          <div class="icon-item">
            <h4>{{ task.name }}</h4>
            <p>
              <ion-text *ngIf="task.type != 'Locked'" [color]="task.status == 'feedback available' ? 'primary' : 'medium'">
                {{ task.type }}
                <ng-container *ngIf="!task.loadingStatus; else spinner">{{ task.status }}</ng-container>
                <ng-template #spinner><ion-spinner name="dots" class="vertical-middle"></ion-spinner></ng-template>
              </ion-text>
            </p>
          </div>

          <ng-container *ngIf="!task.loadingStatus; else iconSpinner">
            <ng-container *ngIf="!task.status || task.status == 'feedback available'">
              <ion-icon name="arrow-forward" slot="end" color="primary" class="icon-forward"></ion-icon>
            </ng-container>

            <ng-container *ngIf="task.status == 'done'">
              <ion-icon name="checkmark" slot="end" color="primary" class="icon-check"></ion-icon>
            </ng-container>

            <ng-container *ngIf="task.status == 'pending review'">
              <ion-icon name="hourglass" slot="end" color="primary"></ion-icon>
            </ng-container>
          </ng-container>

          <ng-template #iconSpinner>
            <ion-spinner slot="end"></ion-spinner>
          </ng-template>

        </ng-container>
      </ion-item>
    </ion-list>
  </ion-card>
</ion-content>
