<ion-header translucent="true"
  class="ion-no-border ion-padding-bottom"
  aria-label="review rating">
  <ion-toolbar>
    <ion-title class="ion-text-center ion-padding-horizontal" [size]="isMobile ? '' : 'large'">Is this feedback helpful?</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <ion-title class="ion-text-center ion-padding-horizontal" size="small">Please rank this feedback from 1 (Not useful) to 5 (Very useful)</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="review-rating ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title class="ion-text-center ion-padding-horizontal">Is this feedback helpful?</ion-title>
    </ion-toolbar>
    <ion-toolbar>
      <ion-title class="ion-text-center ion-padding-horizontal" size="small">Please rank this feedback from 1 (Not useful) to 5 (Very useful)
      </ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="ion-padding-top ion-padding-bottom">
    <div class="ion-padding-top">
      <div class="rating-range">
        <div class="mood" *ngFor="let mood of moods; let i = index"
          [ngClass]="{'selected': moodSelected === i}"
          (click)="rateMood(i)">
          <span class="material-symbols-outlined">
            {{ mood.icon }}
          </span>
          <p>{{ mood.description }}</p>
        </div>
      </div>
    </div>
  </div>

  <ng-container *ngIf="ratingData.rating >= 0 && this.moodSelected !== undefined">
    <h2 class="subTitle">Send a quick thank you note!</h2>
    <div class="quick-tagging">
      <a class="toggle" [class.active]="ratingData.tags.includes('Thanks')" (click)="addOrRemoveTags('Thanks')">Thanks</a>
      <a class="toggle" [class.active]="ratingData.tags.includes('Thank You')" (click)="addOrRemoveTags('Thank You')">Thank You</a>
      <a class="toggle" [class.active]="ratingData.tags.includes('You are awesome!')" (click)="addOrRemoveTags('You are awesome!')">You are awesome!</a>
      <a class="toggle" [class.active]="ratingData.tags.includes('Great support')" (click)="addOrRemoveTags('Great support')">Great support</a>
      <a class="toggle" [class.active]="ratingData.tags.includes('Very helpful')" (click)="addOrRemoveTags('Very helpful')">Very helpful</a>
      <a class="toggle" [class.active]="ratingData.tags.includes('Friendly')" (click)="addOrRemoveTags('Friendly')">Friendly</a>
    </div>

    <ion-input placeholder="Add a personal thank you"
      aria-label="thank you message for reviewer"
      class="comment-box ion-padding"
      [(ngModel)]="ratingData.comment"
    ></ion-input>
  </ng-container>

  <div class="div-after-logo ion-text-center ion-padding-top">
    <ion-button mode="ios"
      [disabled]="isSubmitting ||  this.moodSelected === undefined"
      (click)="submitReviewRating()"
      shape="round"
      class="btn-cta">
      <ng-container *ngIf="!isSubmitting">Submit Feedback</ng-container>
      <ng-container *ngIf="isSubmitting">Submitting...</ng-container>
    </ion-button>
  </div>
</ion-content>
